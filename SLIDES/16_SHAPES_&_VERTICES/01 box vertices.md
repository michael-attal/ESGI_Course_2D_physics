# Introduction

Alright, very well. So, yes, I told you that we were going to start with circles and understand how everything works with this circle shape. But I was thinking, I think it's going to be an eye-opening moment if we understand how to handle those shapes that have vertices. So, if I have a shape that has vertices, right, all this vector vertices around like a polygon or a box, I just want to show to you how we handle those vertices, right? So, how do we go and draw those vertices? How do we ask the graphics files that we have, the graphics.h and graphics.cbp to go and how do we pass that least of vertices to be drawn? And most importantly, how do we transform those vertices, right? Rotate the vertices and translate into the correct position in the world. So, that is what I want to discuss quickly before we move and we talk about collisions.

# Creating a Box Shape

And I'm going to come here in my line 15. And instead of creating just a simple body, I'm going to create a box. Right? So, I'm going to create a box and I have to say I want to create a new body and instead of being a circle shape, this thing is going to be a box shape. And let's just look at what the box shape expects as parent. A box needs a certain width and a certain height valuing pixels, right? Hopefully. So, I have to say that I want to let's say 200 pixels with 100 pixels height. This is my box shape. And I am placing my box shape in the middle of this screen. So, the middle of that rectangle, the middle of the box is going to be in the exact center of my screen. And I'm just giving it a mass of 1.0 just because.

# Implementing Box Vertices

So, I create my box shape, my box body, and then I have to just add box to the list of box. So, we don't look okay. I think it would compile, but there are a couple of things that we have to complete in our search code to make this happen. To actually go and draw this box on this screen. Because this box shape, if I come here and I say that it is 200 pixels width and 100 pixels height. Let's just quickly look, let me just say everything. And let me just add it. My shape dot CPP. And I think it is down here in the box shape. So, here online 48, this constructor of this box shape, it is to do. So, we are going to have to do this thing right here.

# Initializing Width and Height

And the first thing that I have to do is this. I have to say that this width equals to the parameter width. So, I just initialize my attributes and this height equals the parameter that I just received had. But here, we're going to have to do a couple of other things. Especially, load the vertices of the box polygon. Because, think with me, our box shape, what we are calling a box shape is actually a polygon, right? We're going to inherit from polygon. And the polygon shape has that list of vertices. So, we have this vector of vectors that is this list of vertices. So, giving the width and the height, we still need to go and load the correct vertices of this box polygon. And this is exactly what we have to do right now.

# Loading Vertices of the Polygon

I have to come here. And I have to basically load the vertices of the box polygon. And here is where we have to stop and think about what it means for us to load the vertices of this box. So, we are saying that this box has width and height. Correct? Whenever we are creating this box and passing the parameters to the constructor, all width pass is the width and height. But, we need to based on the width and height, we need to go when we have to basically create incorrect vertices in this coordinate system. Right? So, think about a box with a certain width and height. This box, if we want the center of the box to be the origin of my coordinate system, think about this.

# Defining Local Coordinates

If my box was 200 pixels width and 100 pixels height. And I want my box, the center of mass, right? The exact middle of my box to be in the origin of the coordinate system, 00. So, that means that the vertices that I have here, I have to go and I need to navigate to the correct vertex, those points, those vertex two positions, right? X and Y. Let's say that the first vertex of this rectangle is the top left. Right? So, the first one is going to be the top left. The second one, we have to go clockwise. So, it's going to be the top right vertex. And then we go down clockwise. Then it's going to be the bottom right. And then the last one is the left bottom vertex. You see, so we have to go one by one based on the width and height parameters. I have to go and I have to manually go and create now the vertex one, two, three and four or vertex zero, one, two and three.

# Manual Vertex Definition

And this thing right here, whenever we are loading the vertices of a certain polygon, whenever we are loading the vertices of a certain 2D model. And we are giving these values with respect to the origin. This is what programmers, this is what 2D and 3D artists call model space or local space, right? Everything with the respect to the origin. This is what we call local space. The local space, the local coordinate system of my 2D model. In this case, my box.

# Implementing the Vertex Pushback

So, let's come back here to the source code. And I want to start loading. We're going to have to load these things manually based on the width and height. So, let's see. I want to say that the vertices vector. Remember that our polygons, they have this vector of vectors called vertices. I want to push back. So, I want to add one entry. And this thing is going to be our back tube. And I want to load it manually. So, what is the x and y positions of this first vertex on the top left of my box? This thing is going to be minus half of the width. So, minus width divided by 2.0. And why is the y coordinate of that top left? Well, this is going to be minus the height divided by 2.0. See, if you agree with me with what I did here. I am initializing and manually adding a vertex to my polygon is box polygon, which is going to be the top left corner of my box.

# Creating the Four Vertices

So, if I have a certain width parameter and high parameter that I am manually passing as arguments to this constructor, I have to go half of the width to the left and half of the height up. That is the top left. And you see, where we're going to do this, right, I have to do exactly the same thing just changing the vertex now, going clockwise to the second vertex, which is going to be plus the width to the right divided by 2 and minus height. So, why up divided by 2 the height? This is my second vertex, the one on the top right. So, we are going clockwise. The first one was the top left. The second one is the top right. And now I have to go clockwise down to the bottom right vertex. And here's Yank and Paste. That is going to be plus width divided by 2. So, half of the width to the right and plus height down, right divided by 2. And the last one, our bottom left has to come from minus width divided by 2 and plus height divided by 2 down.

# Vertex Order and Local Space

So, these things right here is, this is the first top left top right bottom right bottom left. Starting from the top left, going clockwise, we are describing the vertices of my box, based only on the width and height that we pass as a parent. So, this is a manually creating the vertex list of that box, the vertices of that box in this local space, right, this is the local space, is the model space of my polygon, where the vertices everything is with respect to the origin. And we know we have decided that we want the exact middle, right, this pivot point, this center of mass of my rectangle to be in the middle of my box.

# Shape Configuration and Inertia

Very well. So, now that I have my vertices pushed, let's see if I have something to do here. Get type returns box perfect, a clone. So, whenever we are returning a clone, we are returning a new box shape based on that width and height, this should be okay. Let's see what else. And then this is the get moment of inertia of this shape based on the width, square, height, square times 1 divided by 12, exactly what we saw before in that rotation class. Coco, Coco. So, I think this is it for my shape. We are loading the vertices of my box manually based on the width and height.

# Rendering the Box

And this is what I want to show because we still have a couple of things to do with this box, right, because if I came here to my application and I am loading this box shape based on 200 and 100, this thing goes behind the scenes and loads those four vertices, based on 200 and 100, we go we add this box. But then, if we come here and let's see. So, update everything is fine. Well, this thing right here is not going to work, right? So, this check with the boundaries of the window, everything that is moving and bounces up, bounces left. This thing is not going to work because we can only pass these things with the radius of the surface of the box. Still, we don't have this collision ready.

# Disabling Forces for Rendering

And in order to just enable us to draw something, I am going to come here and I am not going to apply the weight force. So, I want to load a box in the middle of the screen and I don't want that box to fall, right? I don't want that box to suffer the effect of gravity pulling down. So, this thing right here, let me just comment out and this thing comment out. Do I want torque? Not for now. I don't want torque either. So, I'm basically not applying any forces any torque. I just want to draw the vertices of my box in the middle of this screen. Let's see how that goes.

# Drawing the Box in the Graphics Library

So, if I come here to my render application, ooh, here is something that we have to change. So, we know how to draw circles before, right? We go there, we get the circle shape and we ask our graphics, small library to go and draw a circle at that position, with those radius and rotation etc. Now, we have to come here and I need to give some instructions to draw that box that rectangle. So, I am going to do this. Let me just delete this thing and I am going to add a second if statement here. So, if by any chance, my body shape, the end type is a box. We have that immigration type. So, if it is a box, I need to ask my graphics library to draw a box or to draw a polygon, something that I can pass the vertices to.

# Casting and Drawing

So, the first thing I want to do is, I want to get the shape, the box shape of this body and this comes from the shape, but I'm going to have to cast box shape pointer, oops box shape pointer. So, I go there, I fetch the shape, the box shape of my body and then I can from here and I can ask my graphics library and you will see that my graphics library. We have something called, well, we have something called draw rectangle, but this is not what I want because the draw rectangle will draw a rectangle on the screen without rotation. But my box, we will be able to in the very near future to go and apply a torque and rotate that box, rotate that rectangle. So, this is not what I want. What I want to draw is a polygon because look at what the polygon constructor asks for. We pass an x, a y, and then we pass a vector of back to vertices. And this is super handy, right?

# Using Draw Polygon

I can come here and I can say body, position, x, what is the second one? Body, position, y, and here is where I pass that const vector of back to vertices. What is the list of vertices of my body? Well, box shape and then I have vertices, right? This thing right here has all the vertices that we went there and we push back inside that vector of vectors. So, I can pass my vertices and what is the color that I want? Well, what about white color? So, this thing right here is us asking to draw polygon. This is how handy our little graphics dot cpp and graphics dot hs. We don't have to really go and look inside to see how this library goes and draws the line between the vertices and draw things using sdl. All we have to do is say graphics, colon, colon, drop polygon, passing the x position where I want the center of my box to be. The y position where I want the center of my box to be and the list of vertices that represent that polygon. In our case this polygon is a box, but in the future I can have a triangle, a box, I can have pentagon, I can have any type of polygon that I want. All right, does that make sense?

# Testing and Debugging

So, let me just quickly say this thing and let me just do one test. Okay, so there is a warning. Oh, okay, I see. So, the warning is on application line 61. So, right here up, you see on line 61 how we have this far loop and we are not doing anything. All right, I'm just going to ignore this warning for now. I am aware of it. And if I make run, look at what happens. Well, good news and that news, right? So, we are drawing a rectangle in the exact origin of our STL canvas, right? So, we have that rectangle at the top. We can only see the bottom right half part of that box of the rectangle.

# Local Space vs World Space

And this is what we need to address right now because we are passing those vertices in local space. Remember, we are passing in model space, everything we respect to the origin. We need to find a way of transforming those vertices and translating and rotating and transforming those vertices to put them in the correct position in the world. So, frame or frame simulations step by simulation step, we need to transform from local space to what we call world space. We need to transform all those vertices from local space to world space.

# Transformations and Rendering

And you will see programmers talk about world space and local space and this is something super common when we talk about computer graphics, when we talk about 3D, 2D vertices because think about this. If we start defining the vertices of our model, right, our 2D box of our polygon. We start by putting everything with respect to the origin. So, we have this origin and then we start defining that we have the top left vertex and then we go clockwise to the top right, bottom right, bottom left. So, any model, any 2D shape that we want, we can specify these things in local space, which is this local model vertex list, we respect to the origin. But as our simulation starts running and as we start evolving, right, this game loop starts evolving, we are going to translate this box. We are going to translate this polygon. We are going to rotate this box. And this is where these ideas of transforming things from local space to world space comes. We need to go and we need to translate all those vertices into their positioning the world and we need to also rotate those vertices in the correct rotation angle that our body wants to be. Do you see, so we have this movement, right, we have to perform these two things. We have to translate, we have to rotate to correctly place that box to correctly place that polygon in the correct position in the world, right, in our physics world. And this is why we call this the world space. So, we have local space, which is this vertices with respect to the origin, where the middle of my box is the origin of my coordinate system, and then after we rotate and translate in the correct position in the world, then this vertices they are going to be transformed into what we call world space.

# Conclusion and Next Steps

Good stuff, and this is what I'm going to do. I'm going to quickly pause this video and then in the next video we're going to learn how to transform these things from local space to world space. Because we want to position the vertices, we want to position all those vertices after transforming them to world space. Because they need to be in a certain position in the canvas, they need to be rotated by a certain angle, we need to draw them already transformed into world space. So, this is going to be the topic of our next video.
